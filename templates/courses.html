{% extends "base.html" %}

{% block title %}Courses - TKA Learning{% endblock %}

{% block content %}
    <h1>Available Courses 📚</h1>
    
    {# Category Filter #}
    <div style="margin-bottom: 20px;">
        <strong>Filter by Category:</strong>
        <div class="category-filters">
            <a href="/courses" class="btn filter-btn {% if not category_filter %}active{% else %}inactive{% endif %}">
                All
            </a>
            <a href="/courses?category=Photography" class="btn filter-btn {% if category_filter == 'Photography' %}active{% else %}inactive{% endif %}">
                📷 Photography
            </a>
            <a href="/courses?category=Video Production" class="btn filter-btn {% if category_filter == 'Video Production' %}active{% else %}inactive{% endif %}">
                🎥 Video Production
            </a>
            <a href="/courses?category=Design" class="btn filter-btn {% if category_filter == 'Design' %}active{% else %}inactive{% endif %}">
                🎨 Design
            </a>
            <a href="/courses?category=Technology" class="btn filter-btn {% if category_filter == 'Technology' %}active{% else %}inactive{% endif %}">
                💻 Technology
            </a>
            <a href="/courses?category=Business" class="btn filter-btn {% if category_filter == 'Business' %}active{% else %}inactive{% endif %}">
                💼 Business
            </a>
            <a href="/courses?category=Marketing" class="btn filter-btn {% if category_filter == 'Marketing' %}active{% else %}inactive{% endif %}">
                📊 Marketing
            </a>
        </div>
    </div>
    
    {# Search Bar #}
    <form method="GET" action="/courses" class="search-container">
        {% if category_filter %}
            <input type="hidden" name="category" value="{{ category_filter }}">
        {% endif %}
        <input type="text" 
               name="search" 
               placeholder="Search courses by title or description..." 
               value="{{ search_query or '' }}"
               class="search-input">
        <button type="submit" class="btn">🔍 Search</button>
        {% if search_query %}
            <a href="/courses{% if category_filter %}?category={{ category_filter }}{% endif %}" class="btn filter-btn inactive">Clear</a>
        {% endif %}
    </form>

    {% if search_query or category_filter %}
        <p style="color: #666; margin-bottom: 20px;">
            {% if search_query %}
                <strong>Search results for:</strong> "{{ search_query }}"
            {% endif %}
            {% if category_filter %}
                <strong>Category:</strong> {{ category_filter }}
            {% endif %}
            {% if courses|length == 0 %}
                <span style="color: #f5576c;">(No courses found)</span>
            {% else %}
                <span style="color: #667eea;">({{ courses|length }} course{{ 's' if courses|length != 1 }})</span>
            {% endif %}
        </p>
    {% endif %}

    {% if courses|length > 0 %}
        <ul class="course-list">
            {% for course in courses %}
                <li class="course-item">
                    <div class="course-item-content">
                        <div class="course-item-text">
                            <h3><a href="/course/{{ course.id }}">{{ course.title }}</a></h3>
                            <p>{{ course.description }}</p>
                        </div>
                        {% if course.category %}
                            <span class="category-badge">{{ course.category }}</span>
                        {% endif %}
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <div class="empty-state">
            <h3>No courses found</h3>
            <p>Try a different search term or category, or <a href="/courses">view all courses</a>.</p>
        </div>
    {% endif %}
{% endblock %}